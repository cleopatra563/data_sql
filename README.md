# 用户登录日志记录系统 (Login Log System)

## 项目概述

这是一个用于记录和分析用户登录日志的MySQL数据库系统，适用于游戏或应用程序的用户行为分析。该系统设计用于存储用户登录信息，并提供多种查询方式来分析用户登录行为、设备分布、地域分布等数据。

## 数据库结构

### 表结构设计

`user_login_logs` 表用于存储用户登录日志信息：

| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|-----|------|
| `role_id` | `INT` | `NOT NULL` | 用户角色ID |
| `login_time` | `DATETIME` | `NOT NULL` | 登录时间（精确到秒） |
| `phone_model` | `VARCHAR(100)` | `NOT NULL` | 手机型号 |
| `game_id` | `INT` | `NOT NULL` | 游戏ID |
| `country` | `VARCHAR(50)` | `NOT NULL` | 国家/地区 |

### 索引设计

- 复合主键：`(role_id, login_time, game_id)` - 确保数据唯一性
- 索引：`idx_login_time` - 优化时间范围查询
- 索引：`idx_game_id` - 优化按游戏ID查询
- 索引：`idx_country` - 优化按国家统计
- 索引：`idx_phone_model` - 优化按设备型号查询

## 示例数据

脚本包含了10条示例登录记录，涵盖了不同用户、时间、设备型号、游戏和国家的组合，用于演示系统功能。

## 查询示例

系统提供了8种常用的查询示例，用于分析登录数据：

1. **按时间段查询特定用户的登录记录**
2. **统计不同国家用户登录次数**
3. **分析特定游戏的用户登录设备分布**
4. **查询特定游戏在特定时间段内的每日登录人数**
5. **查询每个国家使用最多的手机型号**
6. **查询特定用户在不同游戏的登录记录**
7. **统计每小时登录高峰时段（针对特定游戏）**
8. **查询所有国家在最近7天的总登录次数**

## 使用方法

1. 执行SQL脚本创建表结构：
   ```bash
   mysql -u 用户名 -p 数据库名 < login_log_system.sql
   ```

2. 使用提供的查询示例进行数据分析，或根据需要编写自定义查询。

## 技术特点

- **高效存储**：优化的表结构和索引设计，确保数据存储和查询效率
- **数据分析友好**：提供多种查询示例，方便进行用户行为分析
- **可扩展性**：支持添加更多字段和索引，以满足不同的分析需求
- **数据完整性**：复合主键确保数据唯一性，防止重复记录

## 项目结构

```
data_sql/
├── login_log_system.sql   # 主SQL脚本文件
├── .gitignore             # Git忽略文件配置
└── README.md              # 项目说明文档
```

## Git仓库信息

- 仓库地址：`https://github.com/cleopatra563/data_sql.git`
- 主要功能：用户登录日志记录和分析系统
- 适用数据库：MySQL

## 许可证

MIT License
